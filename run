#!/usr/bin/env bash
set -euxo pipefail

# Prepare
SRC="$( cd "$( dirname "${BASH_SOURCE[0]}" )" >/dev/null 2>&1 && pwd )"
WORKDIR=/tmp/$$
rm -rf $WORKDIR
mkdir -p $WORKDIR/fineract

# Copy to a fixed name (because java -cp can't expand /*.jar wildcards, only /*)
cp $SRC/../fineract/build/libs/fineract-provider*.jar $WORKDIR/fineract-provider.jar

# Now let's add our fineract-pentaho reporting plugin, like so:
unzip $SRC/build/distributions/fineract-pentaho.zip -d $WORKDIR

# Start!
java -cp "$WORKDIR/fineract-provider.jar:$WORKDIR/fineract-pentaho/lib/*" org.springframework.boot.loader.JarLauncher
